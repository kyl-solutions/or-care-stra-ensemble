<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Asset Identity Certificate - Or-care-stra Ensemble</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-dark: #0a0f14;
      --bg-card: #111920;
      --bg-elevated: #1a242d;
      --accent-teal: #14b8a6;
      --accent-cyan: #22d3ee;
      --accent-emerald: #10b981;
      --accent-amber: #f59e0b;
      --accent-rose: #f43f5e;
      --text-primary: #f1f5f9;
      --text-secondary: #94a3b8;
      --text-muted: #64748b;
      --glass-border: rgba(255, 255, 255, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-dark);
      color: var(--text-primary);
      min-height: 100vh;
      padding: 40px;
      background-image:
        radial-gradient(ellipse at 20% 20%, rgba(20, 184, 166, 0.08) 0%, transparent 50%),
        radial-gradient(ellipse at 80% 80%, rgba(34, 211, 238, 0.06) 0%, transparent 50%);
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 60px;
    }

    .header h1 {
      font-size: 42px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--accent-teal), var(--accent-cyan));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 12px;
    }

    .header p {
      font-size: 18px;
      color: var(--text-secondary);
      max-width: 700px;
      margin: 0 auto;
    }

    .subtitle {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(20, 184, 166, 0.15);
      border: 1px solid rgba(20, 184, 166, 0.3);
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      color: var(--accent-teal);
      margin-bottom: 20px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Back Navigation */
    .back-nav {
      position: fixed;
      top: 24px;
      left: 24px;
      z-index: 100;
    }

    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 18px;
      background: rgba(20, 184, 166, 0.15);
      border: 1px solid rgba(20, 184, 166, 0.3);
      border-radius: 12px;
      color: var(--accent-teal);
      text-decoration: none;
      font-size: 13px;
      font-weight: 500;
      transition: all 0.25s ease;
      backdrop-filter: blur(12px);
    }

    .back-btn:hover {
      background: rgba(20, 184, 166, 0.25);
      border-color: rgba(20, 184, 166, 0.5);
      transform: translateX(-4px);
    }

    .back-btn svg {
      width: 16px;
      height: 16px;
      transition: transform 0.25s ease;
    }

    .back-btn:hover svg {
      transform: translateX(-3px);
    }

    /* Visual Diagram */
    .visual-diagram {
      background: linear-gradient(145deg, var(--bg-card), var(--bg-elevated));
      border: 1px solid var(--glass-border);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 50px;
      overflow: hidden;
    }

    .visual-diagram svg {
      width: 100%;
      height: auto;
      min-height: 350px;
    }

    .schematic {
      display: grid;
      grid-template-columns: 1fr 80px 1fr;
      gap: 40px;
      align-items: center;
      margin-bottom: 60px;
    }

    .certificate-card {
      background: linear-gradient(145deg, var(--bg-card), var(--bg-elevated));
      border: 1px solid var(--glass-border);
      border-radius: 20px;
      padding: 32px;
      position: relative;
      overflow: hidden;
    }

    .certificate-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--accent-teal), var(--accent-cyan), var(--accent-emerald));
    }

    .cert-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 24px;
      padding-bottom: 20px;
      border-bottom: 1px solid var(--glass-border);
    }

    .cert-icon {
      width: 64px;
      height: 64px;
      background: linear-gradient(135deg, rgba(20, 184, 166, 0.2), rgba(34, 211, 238, 0.1));
      border: 2px solid var(--accent-teal);
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
    }

    .cert-title h3 {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .cert-title p {
      font-size: 13px;
      color: var(--text-muted);
    }

    .cert-badge {
      margin-left: auto;
      background: rgba(16, 185, 129, 0.15);
      border: 1px solid rgba(16, 185, 129, 0.4);
      color: var(--accent-emerald);
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .cert-field {
      margin-bottom: 16px;
    }

    .cert-field-label {
      font-size: 10px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .cert-field-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      color: var(--text-primary);
      background: rgba(0, 0, 0, 0.3);
      padding: 12px 14px;
      border-radius: 8px;
      border: 1px solid var(--glass-border);
    }

    .cert-field-value.hash {
      color: var(--accent-cyan);
      font-size: 11px;
      word-break: break-all;
    }

    .cert-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    .cert-signature {
      margin-top: 24px;
      padding-top: 20px;
      border-top: 1px dashed var(--glass-border);
    }

    .signature-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }

    .signature-item {
      background: rgba(20, 184, 166, 0.08);
      border: 1px solid rgba(20, 184, 166, 0.2);
      border-radius: 10px;
      padding: 12px;
      text-align: center;
    }

    .signature-item .sig-icon {
      font-size: 20px;
      margin-bottom: 6px;
    }

    .signature-item .sig-label {
      font-size: 10px;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .signature-item .sig-hash {
      font-family: 'JetBrains Mono', monospace;
      font-size: 9px;
      color: var(--accent-teal);
    }

    .arrow-connector {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .arrow-line {
      width: 2px;
      height: 60px;
      background: linear-gradient(180deg, var(--accent-teal), transparent);
    }

    .arrow-icon {
      width: 40px;
      height: 40px;
      background: var(--bg-elevated);
      border: 2px solid var(--accent-teal);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    .arrow-label {
      font-size: 10px;
      color: var(--text-muted);
      text-align: center;
      max-width: 80px;
    }

    .verification-panel {
      background: linear-gradient(145deg, var(--bg-card), var(--bg-elevated));
      border: 1px solid var(--glass-border);
      border-radius: 20px;
      padding: 32px;
    }

    .verification-panel h3 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .verification-step {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      margin-bottom: 20px;
      padding: 16px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 12px;
      border-left: 3px solid var(--accent-teal);
    }

    .step-number {
      width: 32px;
      height: 32px;
      background: var(--accent-teal);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
      flex-shrink: 0;
    }

    .step-content h4 {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .step-content p {
      font-size: 12px;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    .data-model {
      margin-top: 60px;
    }

    .data-model h2 {
      font-size: 28px;
      font-weight: 700;
      text-align: center;
      margin-bottom: 40px;
      color: var(--text-primary);
    }

    .model-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 24px;
    }

    .model-table {
      background: linear-gradient(145deg, var(--bg-card), var(--bg-elevated));
      border: 1px solid var(--glass-border);
      border-radius: 16px;
      overflow: hidden;
    }

    .model-table-header {
      background: linear-gradient(135deg, rgba(20, 184, 166, 0.15), rgba(34, 211, 238, 0.08));
      padding: 16px 20px;
      border-bottom: 1px solid var(--glass-border);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .model-table-header h4 {
      font-size: 14px;
      font-weight: 600;
    }

    .model-table-header span {
      font-size: 18px;
    }

    .model-field {
      display: flex;
      justify-content: space-between;
      padding: 10px 20px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      font-size: 12px;
    }

    .model-field:last-child {
      border-bottom: none;
    }

    .model-field-name {
      font-family: 'JetBrains Mono', monospace;
      color: var(--accent-cyan);
    }

    .model-field-type {
      color: var(--text-muted);
      font-family: 'JetBrains Mono', monospace;
      font-size: 11px;
    }

    .model-field.pk .model-field-name::before {
      content: 'üîë ';
    }

    .model-field.fk .model-field-name::before {
      content: 'üîó ';
    }

    .footer {
      text-align: center;
      margin-top: 60px;
      padding-top: 40px;
      border-top: 1px solid var(--glass-border);
    }

    .footer-logo {
      font-size: 24px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--accent-teal), var(--accent-cyan));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .footer p {
      font-size: 12px;
      color: var(--text-muted);
    }
  </style>
</head>
<body>
  <!-- Back Navigation -->
  <nav class="back-nav">
    <a href="/dashboard" class="back-btn">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Back to Dashboard
    </a>
  </nav>

  <div class="container">
    <header class="header">
      <div class="subtitle">üîê Blockchain Security Layer</div>
      <h1>Asset Identity Certificate</h1>
      <p>Tamper-proof digital passport for medical equipment enabling cross-facility verification and stolen asset detection</p>
    </header>

    <!-- Visual Certificate Flow Diagram -->
    <div class="visual-diagram">
      <svg viewBox="0 0 1200 400" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <!-- Gradients -->
          <linearGradient id="tealGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#14b8a6"/>
            <stop offset="100%" style="stop-color:#22d3ee"/>
          </linearGradient>
          <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#a855f7"/>
            <stop offset="100%" style="stop-color:#6366f1"/>
          </linearGradient>
          <linearGradient id="emeraldGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#10b981"/>
            <stop offset="100%" style="stop-color:#14b8a6"/>
          </linearGradient>
          <linearGradient id="amberGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#f59e0b"/>
            <stop offset="100%" style="stop-color:#fbbf24"/>
          </linearGradient>
          <linearGradient id="roseGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#f43f5e"/>
            <stop offset="100%" style="stop-color:#ef4444"/>
          </linearGradient>

          <!-- Glow filter -->
          <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="4" result="coloredBlur"/>
            <feMerge>
              <feMergeNode in="coloredBlur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>

          <!-- Arrow marker -->
          <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#14b8a6"/>
          </marker>
          <marker id="arrowheadPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#a855f7"/>
          </marker>
        </defs>

        <!-- Background grid -->
        <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
          <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.03)" stroke-width="1"/>
        </pattern>
        <rect width="100%" height="100%" fill="url(#grid)"/>

        <!-- Title -->
        <text x="600" y="35" text-anchor="middle" fill="#f1f5f9" font-size="16" font-weight="700">CHAIN OF CUSTODY FLOW</text>

        <!-- MANUFACTURER -->
        <g transform="translate(50, 70)">
          <rect x="0" y="0" width="150" height="130" rx="14" fill="#111920" stroke="url(#emeraldGrad)" stroke-width="2"/>
          <text x="75" y="24" text-anchor="middle" fill="#10b981" font-size="10" font-weight="600">1. MANUFACTURER</text>

          <!-- Factory icon -->
          <rect x="50" y="38" width="50" height="45" rx="10" fill="rgba(16,185,129,0.2)" stroke="#10b981"/>
          <text x="75" y="68" text-anchor="middle" font-size="20">üè≠</text>

          <text x="75" y="100" text-anchor="middle" fill="#94a3b8" font-size="9">Philips Healthcare</text>

          <!-- Signature chip -->
          <g transform="translate(90, 105)">
            <rect x="0" y="0" width="45" height="18" rx="4" fill="rgba(16,185,129,0.3)" stroke="#10b981"/>
            <text x="22" y="13" text-anchor="middle" fill="#10b981" font-size="7">‚úì Signed</text>
          </g>
        </g>

        <!-- Arrow 1 -->
        <g>
          <path d="M 208 135 L 258 135" fill="none" stroke="url(#tealGrad)" stroke-width="2" marker-end="url(#arrowhead)"/>
          <text x="233" y="125" text-anchor="middle" fill="#64748b" font-size="8">Signs</text>
        </g>

        <!-- DISTRIBUTOR -->
        <g transform="translate(268, 70)">
          <rect x="0" y="0" width="150" height="130" rx="14" fill="#111920" stroke="url(#amberGrad)" stroke-width="2"/>
          <text x="75" y="24" text-anchor="middle" fill="#f59e0b" font-size="10" font-weight="600">2. DISTRIBUTOR</text>

          <!-- Truck icon -->
          <rect x="50" y="38" width="50" height="45" rx="10" fill="rgba(245,158,11,0.2)" stroke="#f59e0b"/>
          <text x="75" y="68" text-anchor="middle" font-size="20">üöö</text>

          <text x="75" y="100" text-anchor="middle" fill="#94a3b8" font-size="9">MedTech SA</text>

          <!-- Signature chip -->
          <g transform="translate(90, 105)">
            <rect x="0" y="0" width="45" height="18" rx="4" fill="rgba(245,158,11,0.3)" stroke="#f59e0b"/>
            <text x="22" y="13" text-anchor="middle" fill="#f59e0b" font-size="7">‚úì Signed</text>
          </g>
        </g>

        <!-- Arrow 2 -->
        <g>
          <path d="M 426 135 L 476 135" fill="none" stroke="url(#tealGrad)" stroke-width="2" marker-end="url(#arrowhead)"/>
          <text x="451" y="125" text-anchor="middle" fill="#64748b" font-size="8">Adds sig</text>
        </g>

        <!-- HOSPITAL -->
        <g transform="translate(486, 70)">
          <rect x="0" y="0" width="150" height="130" rx="14" fill="#111920" stroke="url(#tealGrad)" stroke-width="2" filter="url(#glow)"/>
          <text x="75" y="24" text-anchor="middle" fill="#14b8a6" font-size="10" font-weight="600">3. HOSPITAL</text>

          <!-- Hospital icon -->
          <rect x="50" y="38" width="50" height="45" rx="10" fill="rgba(20,184,166,0.2)" stroke="#14b8a6"/>
          <text x="75" y="68" text-anchor="middle" font-size="20">üè•</text>

          <text x="75" y="100" text-anchor="middle" fill="#94a3b8" font-size="9">Chris Hani Bara</text>

          <!-- Signature chip -->
          <g transform="translate(90, 105)">
            <rect x="0" y="0" width="45" height="18" rx="4" fill="rgba(20,184,166,0.3)" stroke="#14b8a6"/>
            <text x="22" y="13" text-anchor="middle" fill="#14b8a6" font-size="7">‚úì Signed</text>
          </g>
        </g>

        <!-- Arrow 3 -->
        <g>
          <path d="M 644 135 L 694 135" fill="none" stroke="url(#tealGrad)" stroke-width="2" marker-end="url(#arrowhead)"/>
          <text x="669" y="125" text-anchor="middle" fill="#64748b" font-size="8">Deploys</text>
        </g>

        <!-- ASSET IN SERVICE -->
        <g transform="translate(704, 55)">
          <rect x="0" y="0" width="170" height="155" rx="14" fill="#111920" stroke="url(#purpleGrad)" stroke-width="2"/>
          <text x="85" y="22" text-anchor="middle" fill="#a855f7" font-size="10" font-weight="600">4. ASSET IN SERVICE</text>

          <!-- Equipment with certificate -->
          <g transform="translate(35, 35)">
            <!-- Monitor -->
            <rect x="0" y="0" width="55" height="52" rx="10" fill="rgba(20,184,166,0.2)" stroke="#14b8a6" stroke-width="2"/>
            <text x="27" y="36" text-anchor="middle" font-size="24">üíì</text>

            <!-- Certificate badge -->
            <g transform="translate(48, -5)">
              <rect x="0" y="0" width="48" height="40" rx="6" fill="rgba(168,85,247,0.2)" stroke="#a855f7"/>
              <text x="24" y="15" text-anchor="middle" fill="#a855f7" font-size="7" font-weight="600">CERT</text>
              <text x="24" y="26" text-anchor="middle" fill="#64748b" font-size="6">3 sigs</text>
              <text x="24" y="36" text-anchor="middle" fill="#10b981" font-size="8">‚úì</text>
            </g>
          </g>

          <!-- BLE broadcast -->
          <g transform="translate(85, 105)">
            <circle cx="0" cy="0" r="6" fill="none" stroke="#a855f7" stroke-width="1" opacity="0.6">
              <animate attributeName="r" values="6;18;6" dur="2s" repeatCount="indefinite"/>
              <animate attributeName="opacity" values="0.6;0;0.6" dur="2s" repeatCount="indefinite"/>
            </circle>
            <circle cx="0" cy="0" r="6" fill="none" stroke="#a855f7" stroke-width="1" opacity="0.6">
              <animate attributeName="r" values="6;18;6" dur="2s" begin="0.7s" repeatCount="indefinite"/>
              <animate attributeName="opacity" values="0.6;0;0.6" dur="2s" begin="0.7s" repeatCount="indefinite"/>
            </circle>
            <text x="0" y="4" text-anchor="middle" fill="#a855f7" font-size="7">BLE</text>
          </g>

          <text x="85" y="142" text-anchor="middle" fill="#64748b" font-size="8">Broadcasts identity</text>
        </g>

        <!-- VERIFICATION SCENARIOS - Bottom -->
        <g transform="translate(50, 230)">
          <!-- Success Case -->
          <g transform="translate(0, 0)">
            <rect x="0" y="0" width="320" height="105" rx="12" fill="#111920" stroke="rgba(16,185,129,0.5)" stroke-width="2"/>
            <rect x="0" y="0" width="320" height="26" rx="12" fill="rgba(16,185,129,0.15)"/>
            <text x="160" y="18" text-anchor="middle" fill="#10b981" font-size="10" font-weight="600">‚úì KNOWN ASSET</text>

            <!-- Flow -->
            <g transform="translate(15, 38)">
              <rect x="0" y="0" width="52" height="40" rx="6" fill="rgba(20,184,166,0.15)" stroke="#14b8a6"/>
              <text x="26" y="16" text-anchor="middle" font-size="12">üì∂</text>
              <text x="26" y="32" text-anchor="middle" fill="#94a3b8" font-size="7">Gateway</text>

              <path d="M 56 20 L 76 20" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead)"/>

              <rect x="80" y="0" width="52" height="40" rx="6" fill="rgba(168,85,247,0.15)" stroke="#a855f7"/>
              <text x="106" y="16" text-anchor="middle" font-size="12">üîç</text>
              <text x="106" y="32" text-anchor="middle" fill="#94a3b8" font-size="7">Verify</text>

              <path d="M 136 20 L 156 20" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead)"/>

              <rect x="160" y="0" width="52" height="40" rx="6" fill="rgba(16,185,129,0.15)" stroke="#10b981"/>
              <text x="186" y="16" text-anchor="middle" font-size="12">‚úì</text>
              <text x="186" y="32" text-anchor="middle" fill="#10b981" font-size="7">Trusted</text>

              <path d="M 216 20 L 236 20" stroke="#10b981" stroke-width="2" marker-end="url(#arrowhead)"/>

              <rect x="240" y="0" width="52" height="40" rx="6" fill="rgba(16,185,129,0.1)" stroke="#10b981" stroke-dasharray="3"/>
              <text x="266" y="16" text-anchor="middle" font-size="12">üìç</text>
              <text x="266" y="32" text-anchor="middle" fill="#10b981" font-size="7">Track</text>
            </g>

            <text x="160" y="95" text-anchor="middle" fill="#64748b" font-size="8">Genesis hash matches trusted registry</text>
          </g>

          <!-- Alert Case -->
          <g transform="translate(340, 0)">
            <rect x="0" y="0" width="320" height="105" rx="12" fill="#111920" stroke="rgba(239,68,68,0.5)" stroke-width="2"/>
            <rect x="0" y="0" width="320" height="26" rx="12" fill="rgba(239,68,68,0.15)"/>
            <text x="160" y="18" text-anchor="middle" fill="#ef4444" font-size="10" font-weight="600">‚ö†Ô∏è UNKNOWN ASSET</text>

            <!-- Flow -->
            <g transform="translate(15, 38)">
              <rect x="0" y="0" width="52" height="40" rx="6" fill="rgba(20,184,166,0.15)" stroke="#14b8a6"/>
              <text x="26" y="16" text-anchor="middle" font-size="12">üì∂</text>
              <text x="26" y="32" text-anchor="middle" fill="#94a3b8" font-size="7">Gateway</text>

              <path d="M 56 20 L 76 20" stroke="#ef4444" stroke-width="2" marker-end="url(#arrowhead)"/>

              <rect x="80" y="0" width="52" height="40" rx="6" fill="rgba(168,85,247,0.15)" stroke="#a855f7"/>
              <text x="106" y="16" text-anchor="middle" font-size="12">üîç</text>
              <text x="106" y="32" text-anchor="middle" fill="#94a3b8" font-size="7">Verify</text>

              <path d="M 136 20 L 156 20" stroke="#ef4444" stroke-width="2" marker-end="url(#arrowhead)"/>

              <rect x="160" y="0" width="52" height="40" rx="6" fill="rgba(239,68,68,0.15)" stroke="#ef4444"/>
              <text x="186" y="16" text-anchor="middle" font-size="12">‚ùì</text>
              <text x="186" y="32" text-anchor="middle" fill="#ef4444" font-size="7">Unknown</text>

              <path d="M 216 20 L 236 20" stroke="#ef4444" stroke-width="2" marker-end="url(#arrowhead)"/>

              <rect x="240" y="0" width="52" height="40" rx="6" fill="rgba(239,68,68,0.2)" stroke="#ef4444"/>
              <text x="266" y="16" text-anchor="middle" font-size="12">üö®</text>
              <text x="266" y="32" text-anchor="middle" fill="#ef4444" font-size="7">ALERT</text>
            </g>

            <text x="160" y="95" text-anchor="middle" fill="#64748b" font-size="8">"Where are you from, mate?"</text>
          </g>

          <!-- National Registry -->
          <g transform="translate(680, 0)">
            <rect x="0" y="0" width="150" height="105" rx="12" fill="#111920" stroke="url(#purpleGrad)" stroke-width="2"/>
            <text x="75" y="20" text-anchor="middle" fill="#a855f7" font-size="9" font-weight="600">TRUSTED REGISTRY</text>

            <g transform="translate(20, 32)">
              <rect x="0" y="0" width="110" height="52" rx="6" fill="rgba(168,85,247,0.1)"/>

              <text x="10" y="16" fill="#64748b" font-size="7">üè• CHBAH</text>
              <text x="95" y="16" fill="#10b981" font-size="8">‚úì</text>

              <text x="10" y="32" fill="#64748b" font-size="7">üè• Charlotte</text>
              <text x="95" y="32" fill="#10b981" font-size="8">‚úì</text>

              <text x="10" y="48" fill="#64748b" font-size="7">üè≠ Philips</text>
              <text x="95" y="48" fill="#10b981" font-size="8">‚úì</text>
            </g>

            <text x="75" y="97" text-anchor="middle" fill="#64748b" font-size="7">National/Regional</text>
          </g>
        </g>
      </svg>
    </div>

    <div class="schematic">
      <!-- Certificate Card -->
      <div class="certificate-card">
        <div class="cert-header">
          <div class="cert-icon">üíì</div>
          <div class="cert-title">
            <h3>Philips MX800 Patient Monitor</h3>
            <p>Chris Hani Baragwanath Academic Hospital</p>
          </div>
          <div class="cert-badge">
            <span>‚úì</span> Verified
          </div>
        </div>

        <div class="cert-row">
          <div class="cert-field">
            <div class="cert-field-label">Asset Tag</div>
            <div class="cert-field-value">AST-001</div>
          </div>
          <div class="cert-field">
            <div class="cert-field-label">Serial Number</div>
            <div class="cert-field-value">PHM-2024-00142</div>
          </div>
        </div>

        <div class="cert-field">
          <div class="cert-field-label">Genesis Hash (Birth Certificate)</div>
          <div class="cert-field-value hash">a1b2c3d4e5f6...genesis_chbah_2024</div>
        </div>

        <div class="cert-field">
          <div class="cert-field-label">Public Key</div>
          <div class="cert-field-value hash">04:7B:2F:9A:E1:8D:5C:3B:6F:A2:1E:9D:4C:7B:8A:F3...</div>
        </div>

        <div class="cert-row">
          <div class="cert-field">
            <div class="cert-field-label">Issue Date</div>
            <div class="cert-field-value">2024-03-15</div>
          </div>
          <div class="cert-field">
            <div class="cert-field-label">Issuing Authority</div>
            <div class="cert-field-value">CHBAH Asset Mgmt</div>
          </div>
        </div>

        <div class="cert-signature">
          <div class="cert-field-label" style="margin-bottom: 12px;">Chain of Custody Signatures</div>
          <div class="signature-grid">
            <div class="signature-item">
              <div class="sig-icon">üè≠</div>
              <div class="sig-label">Manufacturer</div>
              <div class="sig-hash">sig_philips_0x7f...</div>
            </div>
            <div class="signature-item">
              <div class="sig-icon">üöö</div>
              <div class="sig-label">Distributor</div>
              <div class="sig-hash">sig_medtech_0x3a...</div>
            </div>
            <div class="signature-item">
              <div class="sig-icon">üè•</div>
              <div class="sig-label">Hospital</div>
              <div class="sig-hash">sig_chbah_0x9c...</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Arrow Connector -->
      <div class="arrow-connector">
        <div class="arrow-icon">‚ü∑</div>
        <div class="arrow-label">Gateway Verification</div>
      </div>

      <!-- Verification Panel -->
      <div class="verification-panel">
        <h3>üõ°Ô∏è Cross-Facility Verification</h3>

        <div class="verification-step">
          <div class="step-number">1</div>
          <div class="step-content">
            <h4>Tag Detection</h4>
            <p>Gateway detects BLE tag broadcast containing certificate fingerprint</p>
          </div>
        </div>

        <div class="verification-step">
          <div class="step-number">2</div>
          <div class="step-content">
            <h4>Genesis Validation</h4>
            <p>Check genesis hash against national/regional hospital registry</p>
          </div>
        </div>

        <div class="verification-step">
          <div class="step-number">3</div>
          <div class="step-content">
            <h4>Signature Chain</h4>
            <p>Verify all custody signatures are valid and unbroken</p>
          </div>
        </div>

        <div class="verification-step" style="border-left-color: var(--accent-emerald);">
          <div class="step-number" style="background: var(--accent-emerald);">‚úì</div>
          <div class="step-content">
            <h4>Identity Confirmed</h4>
            <p>Asset recognized as legitimate - add to local tracking</p>
          </div>
        </div>

        <div class="verification-step" style="border-left-color: var(--accent-rose); opacity: 0.7;">
          <div class="step-number" style="background: var(--accent-rose);">!</div>
          <div class="step-content">
            <h4>Unknown Origin Alert</h4>
            <p>"Where are you from, mate?" - Flag for investigation</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Data Model -->
    <div class="data-model">
      <h2>Certificate Data Model</h2>
      <div class="model-grid">
        <div class="model-table">
          <div class="model-table-header">
            <span>üìú</span>
            <h4>asset_certificates</h4>
          </div>
          <div class="model-field pk">
            <span class="model-field-name">certificate_id</span>
            <span class="model-field-type">UUID</span>
          </div>
          <div class="model-field fk">
            <span class="model-field-name">asset_id</span>
            <span class="model-field-type">INTEGER</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">genesis_hash</span>
            <span class="model-field-type">VARCHAR(64)</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">public_key</span>
            <span class="model-field-type">TEXT</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">issuer_id</span>
            <span class="model-field-type">VARCHAR(50)</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">issue_date</span>
            <span class="model-field-type">DATETIME</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">expiry_date</span>
            <span class="model-field-type">DATETIME</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">status</span>
            <span class="model-field-type">ENUM</span>
          </div>
        </div>

        <div class="model-table">
          <div class="model-table-header">
            <span>‚úçÔ∏è</span>
            <h4>custody_signatures</h4>
          </div>
          <div class="model-field pk">
            <span class="model-field-name">signature_id</span>
            <span class="model-field-type">UUID</span>
          </div>
          <div class="model-field fk">
            <span class="model-field-name">certificate_id</span>
            <span class="model-field-type">UUID</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">signer_type</span>
            <span class="model-field-type">ENUM</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">signer_id</span>
            <span class="model-field-type">VARCHAR(100)</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">signature</span>
            <span class="model-field-type">VARCHAR(128)</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">signed_at</span>
            <span class="model-field-type">DATETIME</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">prev_signature</span>
            <span class="model-field-type">VARCHAR(128)</span>
          </div>
        </div>

        <div class="model-table">
          <div class="model-table-header">
            <span>üèõÔ∏è</span>
            <h4>trusted_issuers</h4>
          </div>
          <div class="model-field pk">
            <span class="model-field-name">issuer_id</span>
            <span class="model-field-type">VARCHAR(50)</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">name</span>
            <span class="model-field-type">VARCHAR(200)</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">issuer_type</span>
            <span class="model-field-type">ENUM</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">public_key</span>
            <span class="model-field-type">TEXT</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">genesis_hash</span>
            <span class="model-field-type">VARCHAR(64)</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">trust_level</span>
            <span class="model-field-type">INTEGER</span>
          </div>
          <div class="model-field">
            <span class="model-field-name">is_active</span>
            <span class="model-field-type">BOOLEAN</span>
          </div>
        </div>
      </div>
    </div>

    <footer class="footer">
      <div class="footer-logo">Or-care-stra Ensemble</div>
      <p>Digital Twin Asset Tracking ‚Ä¢ Chris Hani Baragwanath Academic Hospital</p>
    </footer>
  </div>

  <script>
    // Session validation - redirect to dashboard if not authenticated
    // Auth is only valid during current session (set by dashboard after login)
    (function() {
      const isAuthenticated = sessionStorage.getItem('ensemble_auth') === 'true';

      if (!isAuthenticated) {
        // Not authenticated - redirect to dashboard for auth
        window.location.href = '/dashboard';
      }
    })();
  </script>
</body>
</html>
