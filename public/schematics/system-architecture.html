<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>System Architecture - Or-care-stra Ensemble</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-dark: #0a0f14;
      --bg-card: #111920;
      --bg-elevated: #1a242d;
      --accent-teal: #14b8a6;
      --accent-cyan: #22d3ee;
      --accent-emerald: #10b981;
      --accent-amber: #f59e0b;
      --accent-rose: #f43f5e;
      --accent-purple: #a855f7;
      --accent-blue: #3b82f6;
      --text-primary: #f1f5f9;
      --text-secondary: #94a3b8;
      --text-muted: #64748b;
      --glass-border: rgba(255, 255, 255, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-dark);
      color: var(--text-primary);
      min-height: 100vh;
      padding: 40px;
      background-image:
        radial-gradient(ellipse at 10% 30%, rgba(20, 184, 166, 0.08) 0%, transparent 40%),
        radial-gradient(ellipse at 90% 70%, rgba(34, 211, 238, 0.06) 0%, transparent 40%),
        radial-gradient(ellipse at 50% 50%, rgba(168, 85, 247, 0.04) 0%, transparent 50%);
    }

    .container {
      max-width: 1600px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 50px;
    }

    .header h1 {
      font-size: 48px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--accent-teal), var(--accent-cyan), var(--accent-purple));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 12px;
    }

    .header p {
      font-size: 18px;
      color: var(--text-secondary);
      max-width: 800px;
      margin: 0 auto;
    }

    .subtitle {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(20, 184, 166, 0.15);
      border: 1px solid rgba(20, 184, 166, 0.3);
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      color: var(--accent-teal);
      margin-bottom: 20px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Back Navigation */
    .back-nav {
      position: fixed;
      top: 24px;
      left: 24px;
      z-index: 100;
    }

    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 18px;
      background: rgba(20, 184, 166, 0.15);
      border: 1px solid rgba(20, 184, 166, 0.3);
      border-radius: 12px;
      color: var(--accent-teal);
      text-decoration: none;
      font-size: 13px;
      font-weight: 500;
      transition: all 0.25s ease;
      backdrop-filter: blur(12px);
    }

    .back-btn:hover {
      background: rgba(20, 184, 166, 0.25);
      border-color: rgba(20, 184, 166, 0.5);
      transform: translateX(-4px);
    }

    .back-btn svg {
      width: 16px;
      height: 16px;
      transition: transform 0.25s ease;
    }

    .back-btn:hover svg {
      transform: translateX(-3px);
    }

    /* Visual Diagram */
    .visual-diagram {
      background: linear-gradient(145deg, var(--bg-card), var(--bg-elevated));
      border: 1px solid var(--glass-border);
      border-radius: 20px;
      padding: 30px;
      margin-bottom: 50px;
      overflow: hidden;
    }

    .visual-diagram svg {
      width: 100%;
      height: auto;
      min-height: 400px;
    }

    /* Architecture Layers */
    .architecture {
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    .layer {
      background: linear-gradient(145deg, var(--bg-card), var(--bg-elevated));
      border: 1px solid var(--glass-border);
      border-radius: 20px;
      padding: 24px 32px;
      position: relative;
    }

    .layer::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 4px;
      border-radius: 20px 0 0 20px;
    }

    .layer.physical::before { background: var(--accent-emerald); }
    .layer.edge::before { background: var(--accent-cyan); }
    .layer.platform::before { background: var(--accent-teal); }
    .layer.blockchain::before { background: var(--accent-purple); }
    .layer.application::before { background: var(--accent-blue); }

    .layer-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 20px;
    }

    .layer-icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }

    .layer.physical .layer-icon { background: rgba(16, 185, 129, 0.2); border: 1px solid rgba(16, 185, 129, 0.4); }
    .layer.edge .layer-icon { background: rgba(34, 211, 238, 0.2); border: 1px solid rgba(34, 211, 238, 0.4); }
    .layer.platform .layer-icon { background: rgba(20, 184, 166, 0.2); border: 1px solid rgba(20, 184, 166, 0.4); }
    .layer.blockchain .layer-icon { background: rgba(168, 85, 247, 0.2); border: 1px solid rgba(168, 85, 247, 0.4); }
    .layer.application .layer-icon { background: rgba(59, 130, 246, 0.2); border: 1px solid rgba(59, 130, 246, 0.4); }

    .layer-title h3 {
      font-size: 18px;
      font-weight: 700;
    }

    .layer-title p {
      font-size: 12px;
      color: var(--text-muted);
    }

    .layer-badge {
      margin-left: auto;
      font-size: 11px;
      font-weight: 600;
      padding: 6px 12px;
      border-radius: 20px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .layer.physical .layer-badge { background: rgba(16, 185, 129, 0.15); color: var(--accent-emerald); border: 1px solid rgba(16, 185, 129, 0.3); }
    .layer.edge .layer-badge { background: rgba(34, 211, 238, 0.15); color: var(--accent-cyan); border: 1px solid rgba(34, 211, 238, 0.3); }
    .layer.platform .layer-badge { background: rgba(20, 184, 166, 0.15); color: var(--accent-teal); border: 1px solid rgba(20, 184, 166, 0.3); }
    .layer.blockchain .layer-badge { background: rgba(168, 85, 247, 0.15); color: var(--accent-purple); border: 1px solid rgba(168, 85, 247, 0.3); }
    .layer.application .layer-badge { background: rgba(59, 130, 246, 0.15); color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.3); }

    .components {
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
    }

    .component {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid var(--glass-border);
      border-radius: 12px;
      padding: 16px 20px;
      flex: 1;
      min-width: 200px;
      max-width: 280px;
    }

    .component-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .component-icon {
      font-size: 20px;
    }

    .component-name {
      font-size: 13px;
      font-weight: 600;
    }

    .component-details {
      font-size: 11px;
      color: var(--text-muted);
      line-height: 1.6;
    }

    .component-tech {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      margin-top: 10px;
      padding: 4px 10px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 6px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 10px;
      color: var(--text-secondary);
    }

    /* Flow Connectors */
    .flow-connector {
      display: flex;
      justify-content: center;
      padding: 8px 0;
    }

    .flow-arrow {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }

    .flow-line {
      width: 2px;
      height: 20px;
      background: linear-gradient(180deg, var(--accent-teal), var(--accent-cyan));
    }

    .flow-label {
      font-size: 10px;
      color: var(--text-muted);
      background: var(--bg-dark);
      padding: 4px 12px;
      border-radius: 10px;
      border: 1px solid var(--glass-border);
    }

    /* Data Flow Section */
    .data-flow {
      margin-top: 50px;
    }

    .data-flow h2 {
      font-size: 28px;
      font-weight: 700;
      text-align: center;
      margin-bottom: 32px;
    }

    .flow-diagram {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 16px;
      align-items: center;
    }

    .flow-node {
      background: linear-gradient(145deg, var(--bg-card), var(--bg-elevated));
      border: 1px solid var(--glass-border);
      border-radius: 16px;
      padding: 20px;
      text-align: center;
    }

    .flow-node-icon {
      width: 56px;
      height: 56px;
      margin: 0 auto 12px;
      background: rgba(20, 184, 166, 0.15);
      border: 1px solid rgba(20, 184, 166, 0.3);
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
    }

    .flow-node h4 {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .flow-node p {
      font-size: 11px;
      color: var(--text-muted);
      line-height: 1.5;
    }

    .flow-arrow-h {
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--accent-teal);
      font-size: 24px;
    }

    /* Stats Section */
    .stats-section {
      margin-top: 50px;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
    }

    .stat-card {
      background: linear-gradient(145deg, var(--bg-card), var(--bg-elevated));
      border: 1px solid var(--glass-border);
      border-radius: 16px;
      padding: 24px;
      text-align: center;
    }

    .stat-value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 36px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--accent-teal), var(--accent-cyan));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .stat-label {
      font-size: 12px;
      color: var(--text-muted);
    }

    /* Tech Stack */
    .tech-stack {
      margin-top: 50px;
    }

    .tech-stack h2 {
      font-size: 28px;
      font-weight: 700;
      text-align: center;
      margin-bottom: 32px;
    }

    .tech-grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 16px;
    }

    .tech-item {
      background: linear-gradient(145deg, var(--bg-card), var(--bg-elevated));
      border: 1px solid var(--glass-border);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      transition: all 0.2s;
    }

    .tech-item:hover {
      border-color: var(--accent-teal);
      transform: translateY(-2px);
    }

    .tech-item-icon {
      font-size: 32px;
      margin-bottom: 10px;
    }

    .tech-item h4 {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .tech-item p {
      font-size: 10px;
      color: var(--text-muted);
    }

    .footer {
      text-align: center;
      margin-top: 60px;
      padding-top: 40px;
      border-top: 1px solid var(--glass-border);
    }

    .footer-logo {
      font-size: 24px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--accent-teal), var(--accent-cyan));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .footer p {
      font-size: 12px;
      color: var(--text-muted);
    }
  </style>
</head>
<body>
  <!-- Back Navigation -->
  <nav class="back-nav">
    <a href="/dashboard" class="back-btn">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      Back to Dashboard
    </a>
  </nav>

  <div class="container">
    <header class="header">
      <div class="subtitle">üè• Digital Twin Platform</div>
      <h1>Or-care-stra Ensemble</h1>
      <p>End-to-end architecture for real-time medical equipment tracking, blockchain audit trails, and AI-powered anomaly detection</p>
    </header>

    <!-- Visual System Diagram -->
    <div class="visual-diagram">
      <svg viewBox="0 0 1200 500" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <!-- Gradients -->
          <linearGradient id="tealGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#14b8a6"/>
            <stop offset="100%" style="stop-color:#22d3ee"/>
          </linearGradient>
          <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#a855f7"/>
            <stop offset="100%" style="stop-color:#6366f1"/>
          </linearGradient>
          <linearGradient id="emeraldGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#10b981"/>
            <stop offset="100%" style="stop-color:#14b8a6"/>
          </linearGradient>
          <linearGradient id="blueGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#3b82f6"/>
            <stop offset="100%" style="stop-color:#22d3ee"/>
          </linearGradient>
          <linearGradient id="amberGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#f59e0b"/>
            <stop offset="100%" style="stop-color:#fbbf24"/>
          </linearGradient>

          <!-- Glow filter -->
          <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
            <feMerge>
              <feMergeNode in="coloredBlur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>

          <!-- Arrow marker -->
          <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#14b8a6"/>
          </marker>
        </defs>

        <!-- Background grid -->
        <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
          <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.03)" stroke-width="1"/>
        </pattern>
        <rect width="100%" height="100%" fill="url(#grid)"/>

        <!-- PHYSICAL LAYER - Left -->
        <g transform="translate(50, 60)">
          <!-- BLE Tags cluster -->
          <rect x="0" y="0" width="180" height="180" rx="16" fill="#111920" stroke="url(#emeraldGrad)" stroke-width="2"/>
          <text x="90" y="28" text-anchor="middle" fill="#10b981" font-size="11" font-weight="600">PHYSICAL LAYER</text>

          <!-- Equipment icons -->
          <rect x="20" y="45" width="40" height="40" rx="8" fill="rgba(16,185,129,0.2)" stroke="#10b981"/>
          <text x="40" y="72" text-anchor="middle" font-size="18">üíì</text>
          <text x="40" y="98" text-anchor="middle" fill="#94a3b8" font-size="8">Monitor</text>

          <rect x="70" y="45" width="40" height="40" rx="8" fill="rgba(16,185,129,0.2)" stroke="#10b981"/>
          <text x="90" y="72" text-anchor="middle" font-size="18">üíâ</text>
          <text x="90" y="98" text-anchor="middle" fill="#94a3b8" font-size="8">Pump</text>

          <rect x="120" y="45" width="40" height="40" rx="8" fill="rgba(16,185,129,0.2)" stroke="#10b981"/>
          <text x="140" y="72" text-anchor="middle" font-size="18">üå¨Ô∏è</text>
          <text x="140" y="98" text-anchor="middle" fill="#94a3b8" font-size="8">Vent</text>

          <!-- BLE signal waves -->
          <circle cx="90" cy="145" r="8" fill="none" stroke="#10b981" stroke-width="1" opacity="0.6">
            <animate attributeName="r" values="8;25;8" dur="2s" repeatCount="indefinite"/>
            <animate attributeName="opacity" values="0.6;0;0.6" dur="2s" repeatCount="indefinite"/>
          </circle>
          <circle cx="90" cy="145" r="8" fill="none" stroke="#10b981" stroke-width="1" opacity="0.6">
            <animate attributeName="r" values="8;25;8" dur="2s" begin="0.5s" repeatCount="indefinite"/>
            <animate attributeName="opacity" values="0.6;0;0.6" dur="2s" begin="0.5s" repeatCount="indefinite"/>
          </circle>
          <text x="90" y="170" text-anchor="middle" fill="#10b981" font-size="9">BLE Tags</text>
        </g>

        <!-- Arrow: Physical ‚Üí Gateway -->
        <g>
          <path d="M 240 150 Q 280 150 280 190 Q 280 230 320 230" fill="none" stroke="url(#tealGrad)" stroke-width="2" marker-end="url(#arrowhead)"/>
          <text x="280" y="175" text-anchor="middle" fill="#64748b" font-size="8">RSSI</text>
        </g>

        <!-- GATEWAY/EDGE LAYER -->
        <g transform="translate(330, 150)">
          <rect x="0" y="0" width="160" height="150" rx="16" fill="#111920" stroke="url(#tealGrad)" stroke-width="2"/>
          <text x="80" y="26" text-anchor="middle" fill="#22d3ee" font-size="11" font-weight="600">EDGE LAYER</text>

          <!-- Gateway icon -->
          <rect x="55" y="40" width="50" height="50" rx="10" fill="rgba(34,211,238,0.2)" stroke="#22d3ee"/>
          <text x="80" y="73" text-anchor="middle" font-size="22">üì∂</text>

          <text x="80" y="110" text-anchor="middle" fill="#94a3b8" font-size="9">IoT Gateway</text>
          <text x="80" y="125" text-anchor="middle" fill="#64748b" font-size="8">Trilateration</text>
          <text x="80" y="140" text-anchor="middle" fill="#64748b" font-size="8">¬± 3m accuracy</text>
        </g>

        <!-- Arrow: Gateway ‚Üí Platform -->
        <path d="M 500 225 L 560 225" fill="none" stroke="url(#tealGrad)" stroke-width="2" marker-end="url(#arrowhead)"/>
        <text x="530" y="215" text-anchor="middle" fill="#64748b" font-size="8">REST/WS</text>

        <!-- PLATFORM LAYER - Center -->
        <g transform="translate(570, 110)">
          <rect x="0" y="0" width="200" height="230" rx="16" fill="#111920" stroke="url(#tealGrad)" stroke-width="2" filter="url(#glow)"/>
          <text x="100" y="26" text-anchor="middle" fill="#14b8a6" font-size="11" font-weight="600">CORE PLATFORM</text>

          <!-- API Server -->
          <rect x="20" y="42" width="70" height="55" rx="8" fill="rgba(20,184,166,0.15)" stroke="#14b8a6"/>
          <text x="55" y="70" text-anchor="middle" font-size="16">üöÄ</text>
          <text x="55" y="88" text-anchor="middle" fill="#94a3b8" font-size="8">Hono.js</text>

          <!-- Database -->
          <rect x="110" y="42" width="70" height="55" rx="8" fill="rgba(20,184,166,0.15)" stroke="#14b8a6"/>
          <text x="145" y="70" text-anchor="middle" font-size="16">üóÑÔ∏è</text>
          <text x="145" y="88" text-anchor="middle" fill="#94a3b8" font-size="8">SQLite</text>

          <!-- WebSocket -->
          <rect x="20" y="110" width="70" height="55" rx="8" fill="rgba(20,184,166,0.15)" stroke="#14b8a6"/>
          <text x="55" y="138" text-anchor="middle" font-size="16">üîå</text>
          <text x="55" y="156" text-anchor="middle" fill="#94a3b8" font-size="8">WebSocket</text>

          <!-- Simulator -->
          <rect x="110" y="110" width="70" height="55" rx="8" fill="rgba(20,184,166,0.15)" stroke="#14b8a6"/>
          <text x="145" y="138" text-anchor="middle" font-size="16">üéÆ</text>
          <text x="145" y="156" text-anchor="middle" fill="#94a3b8" font-size="8">Simulator</text>

          <!-- Node.js badge -->
          <rect x="65" y="180" width="70" height="26" rx="13" fill="rgba(20,184,166,0.3)"/>
          <text x="100" y="198" text-anchor="middle" fill="#14b8a6" font-size="10" font-weight="600">Node.js</text>
        </g>

        <!-- Arrow: Platform ‚Üí Blockchain (downward) -->
        <path d="M 670 350 L 670 380" fill="none" stroke="url(#purpleGrad)" stroke-width="2" marker-end="url(#arrowhead)"/>
        <text x="695" y="370" fill="#64748b" font-size="8">Hash</text>

        <!-- BLOCKCHAIN LAYER - Bottom Center -->
        <g transform="translate(520, 390)">
          <rect x="0" y="0" width="300" height="100" rx="16" fill="#111920" stroke="url(#purpleGrad)" stroke-width="2"/>
          <text x="150" y="22" text-anchor="middle" fill="#a855f7" font-size="10" font-weight="600">‚õìÔ∏è BLOCKCHAIN AUDIT</text>

          <!-- Block chain visual -->
          <g transform="translate(30, 38)">
            <!-- Block 1 -->
            <rect x="0" y="0" width="45" height="38" rx="6" fill="rgba(168,85,247,0.2)" stroke="#a855f7"/>
            <text x="22" y="16" text-anchor="middle" fill="#a855f7" font-size="9" font-weight="600">#24</text>
            <text x="22" y="30" text-anchor="middle" fill="#64748b" font-size="7">3f7a..</text>

            <!-- Chain link -->
            <line x1="45" y1="19" x2="58" y2="19" stroke="#a855f7" stroke-width="2"/>

            <!-- Block 2 -->
            <rect x="58" y="0" width="45" height="38" rx="6" fill="rgba(168,85,247,0.2)" stroke="#a855f7"/>
            <text x="80" y="16" text-anchor="middle" fill="#a855f7" font-size="9" font-weight="600">#25</text>
            <text x="80" y="30" text-anchor="middle" fill="#64748b" font-size="7">8b2c..</text>

            <!-- Chain link -->
            <line x1="103" y1="19" x2="116" y2="19" stroke="#a855f7" stroke-width="2"/>

            <!-- Block 3 -->
            <rect x="116" y="0" width="45" height="38" rx="6" fill="rgba(168,85,247,0.3)" stroke="#a855f7" stroke-width="2"/>
            <text x="138" y="16" text-anchor="middle" fill="#a855f7" font-size="9" font-weight="600">#26</text>
            <text x="138" y="30" text-anchor="middle" fill="#64748b" font-size="7">fe70..</text>

            <!-- Chain link -->
            <line x1="161" y1="19" x2="174" y2="19" stroke="#a855f7" stroke-width="2" stroke-dasharray="4"/>

            <!-- Next block indicator -->
            <rect x="174" y="4" width="32" height="30" rx="6" fill="none" stroke="#a855f7" stroke-dasharray="4" opacity="0.5"/>
            <text x="190" y="24" text-anchor="middle" fill="#64748b" font-size="14">+</text>
          </g>

          <text x="150" y="90" text-anchor="middle" fill="#64748b" font-size="8">Immutable ‚Ä¢ Tamper-evident ‚Ä¢ SHA-256</text>
        </g>

        <!-- Arrow: Platform ‚Üí Application -->
        <path d="M 780 225 L 850 225" fill="none" stroke="url(#blueGrad)" stroke-width="2" marker-end="url(#arrowhead)"/>
        <text x="815" y="215" fill="#64748b" font-size="8">UI Data</text>

        <!-- APPLICATION LAYER - Right -->
        <g transform="translate(860, 60)">
          <rect x="0" y="0" width="290" height="300" rx="16" fill="#111920" stroke="url(#blueGrad)" stroke-width="2"/>
          <text x="145" y="26" text-anchor="middle" fill="#3b82f6" font-size="11" font-weight="600">APPLICATION LAYER</text>

          <!-- Dashboard mockup -->
          <rect x="20" y="42" width="250" height="150" rx="10" fill="#0a0f14" stroke="rgba(255,255,255,0.1)"/>

          <!-- Header bar -->
          <rect x="20" y="42" width="250" height="24" rx="10" fill="rgba(20,184,166,0.1)"/>
          <circle cx="34" cy="54" r="4" fill="#f43f5e"/>
          <circle cx="48" cy="54" r="4" fill="#f59e0b"/>
          <circle cx="62" cy="54" r="4" fill="#10b981"/>
          <text x="145" y="58" text-anchor="middle" fill="#94a3b8" font-size="8">Command Center</text>

          <!-- Floor plan area -->
          <rect x="28" y="74" width="150" height="105" rx="6" fill="rgba(20,184,166,0.05)" stroke="rgba(20,184,166,0.2)"/>

          <!-- Zone markers -->
          <rect x="36" y="82" width="38" height="22" rx="4" fill="rgba(239,68,68,0.2)" stroke="#ef4444" stroke-width="1"/>
          <text x="55" y="97" text-anchor="middle" fill="#ef4444" font-size="7">ICU</text>

          <rect x="82" y="82" width="38" height="22" rx="4" fill="rgba(59,130,246,0.2)" stroke="#3b82f6" stroke-width="1"/>
          <text x="101" y="97" text-anchor="middle" fill="#3b82f6" font-size="7">OT</text>

          <rect x="128" y="82" width="38" height="22" rx="4" fill="rgba(16,185,129,0.2)" stroke="#10b981" stroke-width="1"/>
          <text x="147" y="97" text-anchor="middle" fill="#10b981" font-size="7">ED</text>

          <!-- Equipment dots -->
          <circle cx="48" cy="130" r="4" fill="#14b8a6">
            <animate attributeName="opacity" values="1;0.5;1" dur="1.5s" repeatCount="indefinite"/>
          </circle>
          <circle cx="68" cy="145" r="4" fill="#14b8a6"/>
          <circle cx="100" cy="125" r="4" fill="#f59e0b"/>
          <circle cx="145" cy="140" r="4" fill="#14b8a6"/>
          <circle cx="120" cy="160" r="4" fill="#ef4444">
            <animate attributeName="r" values="4;6;4" dur="1s" repeatCount="indefinite"/>
          </circle>

          <!-- Stats panel -->
          <rect x="186" y="74" width="75" height="105" rx="6" fill="rgba(0,0,0,0.3)"/>
          <text x="223" y="92" text-anchor="middle" fill="#64748b" font-size="8">Assets</text>
          <text x="223" y="112" text-anchor="middle" fill="#14b8a6" font-size="16" font-weight="700">50</text>
          <text x="223" y="135" text-anchor="middle" fill="#64748b" font-size="8">Online</text>
          <text x="223" y="155" text-anchor="middle" fill="#10b981" font-size="16" font-weight="700">47</text>

          <!-- Bottom labels -->
          <g transform="translate(20, 205)">
            <rect x="0" y="0" width="78" height="32" rx="8" fill="rgba(20,184,166,0.1)" stroke="rgba(20,184,166,0.3)"/>
            <text x="39" y="13" text-anchor="middle" fill="#94a3b8" font-size="7">Floor Plan</text>
            <text x="39" y="25" text-anchor="middle" fill="#14b8a6" font-size="8" font-weight="600">üó∫Ô∏è Live</text>

            <rect x="86" y="0" width="78" height="32" rx="8" fill="rgba(239,68,68,0.1)" stroke="rgba(239,68,68,0.3)"/>
            <text x="125" y="13" text-anchor="middle" fill="#94a3b8" font-size="7">Alerts</text>
            <text x="125" y="25" text-anchor="middle" fill="#ef4444" font-size="8" font-weight="600">üîî Real-time</text>

            <rect x="172" y="0" width="78" height="32" rx="8" fill="rgba(168,85,247,0.1)" stroke="rgba(168,85,247,0.3)"/>
            <text x="211" y="13" text-anchor="middle" fill="#94a3b8" font-size="7">Blockchain</text>
            <text x="211" y="25" text-anchor="middle" fill="#a855f7" font-size="8" font-weight="600">‚õìÔ∏è Audit</text>
          </g>

          <!-- Users -->
          <g transform="translate(20, 252)">
            <text x="0" y="10" fill="#64748b" font-size="8">üë©‚Äç‚öïÔ∏è Nurses</text>
            <text x="85" y="10" fill="#64748b" font-size="8">üîí Security</text>
            <text x="175" y="10" fill="#64748b" font-size="8">üë®‚Äçüíº Admin</text>
          </g>
        </g>

        <!-- Hospital Building Silhouette -->
        <g transform="translate(50, 260)" opacity="0.3">
          <path d="M0 100 L0 60 L20 60 L20 40 L40 40 L40 60 L60 60 L60 30 L80 30 L80 60 L100 60 L100 100 Z" fill="none" stroke="#14b8a6" stroke-width="1"/>
          <text x="50" y="118" text-anchor="middle" fill="#64748b" font-size="8">Chris Hani Bara</text>
        </g>
      </svg>
    </div>

    <!-- Architecture Layers -->
    <div class="architecture">
      <!-- Physical Layer -->
      <div class="layer physical">
        <div class="layer-header">
          <div class="layer-icon">üì°</div>
          <div class="layer-title">
            <h3>Physical Layer</h3>
            <p>IoT infrastructure and equipment tagging</p>
          </div>
          <div class="layer-badge">Hardware</div>
        </div>
        <div class="components">
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üè∑Ô∏è</span>
              <span class="component-name">BLE Asset Tags</span>
            </div>
            <div class="component-details">
              Ultra-low power Bluetooth beacons attached to medical equipment. Broadcast identity every 1-5 seconds.
            </div>
            <div class="component-tech">Bluetooth 5.0 ‚Ä¢ 2+ year battery</div>
          </div>
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üì∂</span>
              <span class="component-name">IoT Gateways</span>
            </div>
            <div class="component-details">
              Zone-based receivers that triangulate tag positions and relay data to the platform.
            </div>
            <div class="component-tech">WiFi/Ethernet ‚Ä¢ PoE powered</div>
          </div>
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üíì</span>
              <span class="component-name">Medical Equipment</span>
            </div>
            <div class="component-details">
              Patient monitors, infusion pumps, ventilators, defibrillators, ultrasound machines.
            </div>
            <div class="component-tech">50+ high-value assets (pilot)</div>
          </div>
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üó∫Ô∏è</span>
              <span class="component-name">Floor Plan Zones</span>
            </div>
            <div class="component-details">
              ICU, Operating Theatre, Emergency, Storage areas with defined geofence boundaries.
            </div>
            <div class="component-tech">10 zones ‚Ä¢ 1 ward pilot</div>
          </div>
        </div>
      </div>

      <div class="flow-connector">
        <div class="flow-arrow">
          <div class="flow-line"></div>
          <div class="flow-label">RSSI signals ‚Ä¢ Tag broadcasts</div>
          <div class="flow-line"></div>
        </div>
      </div>

      <!-- Edge Layer -->
      <div class="layer edge">
        <div class="layer-header">
          <div class="layer-icon">‚ö°</div>
          <div class="layer-title">
            <h3>Edge Processing</h3>
            <p>Real-time signal processing and position calculation</p>
          </div>
          <div class="layer-badge">Processing</div>
        </div>
        <div class="components">
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üìç</span>
              <span class="component-name">Trilateration Engine</span>
            </div>
            <div class="component-details">
              Calculate precise X,Y coordinates from multiple gateway RSSI readings using signal strength algorithms.
            </div>
            <div class="component-tech">¬±3m accuracy</div>
          </div>
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üö®</span>
              <span class="component-name">Geofence Processor</span>
            </div>
            <div class="component-details">
              Real-time boundary detection. Triggers alerts when equipment crosses zone perimeters.
            </div>
            <div class="component-tech">< 5 second latency</div>
          </div>
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üîÑ</span>
              <span class="component-name">Event Generator</span>
            </div>
            <div class="component-details">
              Creates movement events, status changes, and alert triggers for blockchain recording.
            </div>
            <div class="component-tech">SHA-256 hashing</div>
          </div>
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üíæ</span>
              <span class="component-name">Offline Buffer</span>
            </div>
            <div class="component-details">
              Local SQLite storage for 24-48 hour operation during network outages. Auto-sync on reconnect.
            </div>
            <div class="component-tech">IndexedDB + SQLite</div>
          </div>
        </div>
      </div>

      <div class="flow-connector">
        <div class="flow-arrow">
          <div class="flow-line"></div>
          <div class="flow-label">WebSocket ‚Ä¢ REST API</div>
          <div class="flow-line"></div>
        </div>
      </div>

      <!-- Platform Layer -->
      <div class="layer platform">
        <div class="layer-header">
          <div class="layer-icon">üñ•Ô∏è</div>
          <div class="layer-title">
            <h3>Core Platform</h3>
            <p>Backend services, APIs, and data management</p>
          </div>
          <div class="layer-badge">Backend</div>
        </div>
        <div class="components">
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üöÄ</span>
              <span class="component-name">Hono.js API Server</span>
            </div>
            <div class="component-details">
              Lightning-fast REST API for asset queries, alerts, user management, and real-time updates.
            </div>
            <div class="component-tech">Node.js ‚Ä¢ TypeScript</div>
          </div>
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üóÑÔ∏è</span>
              <span class="component-name">SQLite Database</span>
            </div>
            <div class="component-details">
              Embedded database for assets, locations, events, users, and maintenance records. Zero config.
            </div>
            <div class="component-tech">better-sqlite3 ‚Ä¢ WAL mode</div>
          </div>
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üîå</span>
              <span class="component-name">WebSocket Server</span>
            </div>
            <div class="component-details">
              Real-time bidirectional communication for live updates, simulator control, and alerts.
            </div>
            <div class="component-tech">ws ‚Ä¢ Auto-reconnect</div>
          </div>
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üéÆ</span>
              <span class="component-name">IoT Simulator</span>
            </div>
            <div class="component-details">
              Realistic BLE tag movement simulation with configurable scenarios: normal, theft, hoarding, busy.
            </div>
            <div class="component-tech">5-second tick rate</div>
          </div>
        </div>
      </div>

      <div class="flow-connector">
        <div class="flow-arrow">
          <div class="flow-line"></div>
          <div class="flow-label">Cryptographic chaining ‚Ä¢ Merkle roots</div>
          <div class="flow-line"></div>
        </div>
      </div>

      <!-- Blockchain Layer -->
      <div class="layer blockchain">
        <div class="layer-header">
          <div class="layer-icon">‚õìÔ∏è</div>
          <div class="layer-title">
            <h3>Blockchain Audit Layer</h3>
            <p>Tamper-evident logging and chain of custody</p>
          </div>
          <div class="layer-badge">Immutable</div>
        </div>
        <div class="components">
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üì¶</span>
              <span class="component-name">Block Producer</span>
            </div>
            <div class="component-details">
              Automatic block creation every 30 seconds or 100 transactions. Merkle root calculation for integrity.
            </div>
            <div class="component-tech">SHA-256 ‚Ä¢ Auto-seal</div>
          </div>
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üîó</span>
              <span class="component-name">Chain Validator</span>
            </div>
            <div class="component-details">
              Full chain integrity verification. Detects tampering by validating hash chains from genesis.
            </div>
            <div class="component-tech">O(n) verification</div>
          </div>
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üìú</span>
              <span class="component-name">Asset Certificates</span>
            </div>
            <div class="component-details">
              Digital identity passports for equipment. Chain of custody signatures from manufacturer to hospital.
            </div>
            <div class="component-tech">PKI signatures</div>
          </div>
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üîç</span>
              <span class="component-name">Audit Explorer</span>
            </div>
            <div class="component-details">
              Query interface for transaction history, block details, and asset movement trails.
            </div>
            <div class="component-tech">Full-text search</div>
          </div>
        </div>
      </div>

      <div class="flow-connector">
        <div class="flow-arrow">
          <div class="flow-line"></div>
          <div class="flow-label">Real-time visualization ‚Ä¢ Alerts</div>
          <div class="flow-line"></div>
        </div>
      </div>

      <!-- Application Layer -->
      <div class="layer application">
        <div class="layer-header">
          <div class="layer-icon">üéØ</div>
          <div class="layer-title">
            <h3>Application Layer</h3>
            <p>User interfaces and operational dashboards</p>
          </div>
          <div class="layer-badge">Frontend</div>
        </div>
        <div class="components">
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üó∫Ô∏è</span>
              <span class="component-name">Command Center</span>
            </div>
            <div class="component-details">
              Isometric 3D floor plan with real-time asset positions, zone overlays, and equipment markers.
            </div>
            <div class="component-tech">Vanilla JS ‚Ä¢ CSS3</div>
          </div>
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üîî</span>
              <span class="component-name">Alert Management</span>
            </div>
            <div class="component-details">
              Real-time alert feed with severity levels. Acknowledge, resolve, and track incident history.
            </div>
            <div class="component-tech">WebSocket live updates</div>
          </div>
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üìä</span>
              <span class="component-name">Analytics Dashboard</span>
            </div>
            <div class="component-details">
              ROI tracking, savings metrics, equipment utilization, and trend analysis.
            </div>
            <div class="component-tech">Chart.js ‚Ä¢ Real-time</div>
          </div>
          <div class="component">
            <div class="component-header">
              <span class="component-icon">üì±</span>
              <span class="component-name">Mobile App (Future)</span>
            </div>
            <div class="component-details">
              Nurse and security officer mobile interface for on-the-go asset lookup and alerts.
            </div>
            <div class="component-tech">React Native ‚Ä¢ PWA</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Data Flow Diagram -->
    <div class="data-flow">
      <h2>Data Flow Pipeline</h2>
      <div class="flow-diagram">
        <div class="flow-node">
          <div class="flow-node-icon">üè∑Ô∏è</div>
          <h4>Tag Broadcast</h4>
          <p>BLE beacon transmits ID + battery level</p>
        </div>
        <div class="flow-arrow-h">‚Üí</div>
        <div class="flow-node">
          <div class="flow-node-icon">üì∂</div>
          <h4>Gateway Capture</h4>
          <p>Multiple gateways receive RSSI signals</p>
        </div>
        <div class="flow-arrow-h">‚Üí</div>
        <div class="flow-node">
          <div class="flow-node-icon">üìç</div>
          <h4>Position Calc</h4>
          <p>Trilateration determines X,Y coordinates</p>
        </div>
        <div class="flow-arrow-h">‚Üí</div>
        <div class="flow-node">
          <div class="flow-node-icon">‚õìÔ∏è</div>
          <h4>Chain Record</h4>
          <p>Movement hashed and added to block</p>
        </div>
        <div class="flow-arrow-h">‚Üí</div>
        <div class="flow-node">
          <div class="flow-node-icon">üó∫Ô∏è</div>
          <h4>UI Update</h4>
          <p>Real-time map and alert display</p>
        </div>
      </div>
    </div>

    <!-- Stats -->
    <div class="stats-section">
      <div class="stat-card">
        <div class="stat-value">50+</div>
        <div class="stat-label">High-Value Assets Tracked</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">&lt;5s</div>
        <div class="stat-label">Alert Response Time</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">48h</div>
        <div class="stat-label">Offline Resilience</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">100%</div>
        <div class="stat-label">Audit Trail Coverage</div>
      </div>
    </div>

    <!-- Tech Stack -->
    <div class="tech-stack">
      <h2>Technology Stack</h2>
      <div class="tech-grid">
        <div class="tech-item">
          <div class="tech-item-icon">‚ö°</div>
          <h4>Hono.js</h4>
          <p>Ultra-fast API</p>
        </div>
        <div class="tech-item">
          <div class="tech-item-icon">üóÑÔ∏è</div>
          <h4>SQLite</h4>
          <p>Embedded DB</p>
        </div>
        <div class="tech-item">
          <div class="tech-item-icon">üñ•Ô∏è</div>
          <h4>Electron</h4>
          <p>Desktop App</p>
        </div>
        <div class="tech-item">
          <div class="tech-item-icon">üîê</div>
          <h4>SHA-256</h4>
          <p>Crypto Hashing</p>
        </div>
        <div class="tech-item">
          <div class="tech-item-icon">üîå</div>
          <h4>WebSocket</h4>
          <p>Real-time</p>
        </div>
        <div class="tech-item">
          <div class="tech-item-icon">‚òÅÔ∏è</div>
          <h4>Cloudflare</h4>
          <p>Edge Network</p>
        </div>
      </div>
    </div>

    <footer class="footer">
      <div class="footer-logo">Or-care-stra Ensemble</div>
      <p>Digital Twin Asset Tracking ‚Ä¢ Chris Hani Baragwanath Academic Hospital</p>
    </footer>
  </div>

  <script>
    // Session validation - redirect to dashboard if not authenticated
    // Auth is only valid during current session (set by dashboard after login)
    (function() {
      const isAuthenticated = sessionStorage.getItem('ensemble_auth') === 'true';

      if (!isAuthenticated) {
        // Not authenticated - redirect to dashboard for auth
        window.location.href = '/dashboard';
      }
    })();
  </script>
</body>
</html>
